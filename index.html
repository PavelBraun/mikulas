<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1024, initial-scale=1.0">
    <title>MikulÃ¡Å¡skÃ¡ aplikace</title>
    <link rel="icon" type="image/png" href="images/app-icon.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ÃšvodnÃ­ obrazovka -->
    <div id="welcomeScreen" class="screen active" style="background-image: url('images/bg-welcome.png')">
        <div class="content">
            <h1>VÃ­tej!</h1>
            <button onclick="app.goToPin()" class="btn-large">ZaÄÃ­t</button>
        </div>
    </div>

    <!-- PIN obrazovka -->
    <div id="pinScreen" class="screen" style="background-image: url('images/bg-pin.png')">
        <button class="secret-joke-btn" onclick="app.triggerJoke()"></button>
        <div class="content">
            <div class="pin-inputs">
                <input type="password" maxlength="1" class="pin-digit" data-index="0" onclick="app.secretCode()">
                <input type="password" maxlength="1" class="pin-digit" data-index="1" onclick="app.secretCode()">
                <input type="password" maxlength="1" class="pin-digit" data-index="2" onclick="app.secretCode()">
                <input type="password" maxlength="1" class="pin-digit" data-index="3" onclick="app.secretCode()">
            </div>
            <p class="error-message" id="pinError"></p>
        </div>
    </div>

    <!-- Kolo Å¡tÄ›stÃ­ -->
    <div id="wheelScreen" class="screen" style="background-image: url('images/bg-kolo.png')">
        <div class="content">
            <canvas id="wheelCanvas" width="600" height="600"></canvas>
            <div class="loading-container">
                <div class="loading-text">HledÃ¡m ve svÃ½ch poznÃ¡mkÃ¡ch...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            <button onclick="app.spinWheel()" id="spinButton" class="btn-large" style="display: none;">RoztoÄit</button>
        </div>
    </div>

    <!-- Dopis na pergamenu -->
    <div id="letterScreen" class="screen" style="background-image: url('images/bg-letter.png')">
        <button class="secret-regenerate-btn" onclick="app.regenerateContent()"></button>
        <div class="content">
            <div class="parchment">
                <div id="letterText" class="letter-text"></div>
            </div>
            <button id="endLetterButton" onclick="app.goToGoodbye()" class="btn-large">DokonÄit</button>
        </div>
    </div>

    <!-- RozlouÄenÃ­ -->
    <div id="goodbyeScreen" class="screen" style="background-image: url('images/bg-goodbye.png')">
        <div class="content">
            <h1>DÄ›kujeme a tÄ›Å¡Ã­me se na dalÅ¡Ã­ setkÃ¡nÃ­!</h1>
            <button onclick="app.restart()" class="btn-large">ZaÄÃ­t znovu</button>
        </div>
    </div>

    <!-- Admin panel -->
    <div id="adminScreen" class="screen admin-screen">
        <button class="help-btn" onclick="app.showHelp()" title="NÃ¡povÄ›da">?</button>
        <button class="close-admin-btn" onclick="app.closeAdmin()" title="ZavÅ™Ã­t administraci">âœ•</button>
        <div class="content">
            <h1>Administrace - NastavenÃ­ dÄ›tÃ­</h1>
            
            <div class="admin-controls">
                <button onclick="app.addChild()" class="btn-small">â• PÅ™idat dÃ­tÄ›</button>
                <button onclick="app.exportBackup()" class="btn-small">ğŸ’¾ VytvoÅ™it zÃ¡lohu</button>
                <button onclick="app.clearData()" class="btn-small btn-danger">ğŸ—‘ï¸ Smazat vÅ¡e</button>
                <div class="file-drop-zone" id="dropZone">
                    <p>ğŸ“‚ PÅ™etÃ¡hnÄ›te zÃ¡lohu (.json nebo .csv) sem nebo kliknÄ›te pro vÃ½bÄ›r</p>
                    <input type="file" id="fileInput" accept=".json,.csv" style="display: none;">
                </div>
            </div>

            <table class="admin-table" id="adminTable">
                <thead>
                    <tr>
                        <th onclick="app.toggleSort('pin')">PIN</th>
                        <th onclick="app.toggleSort('name')">JmÃ©no</th>
                        <th>Akce</th>
                    </tr>
                </thead>
                <tbody id="adminTableBody">
                </tbody>
            </table>

            <button onclick="app.closeAdmin()" class="btn-large">ZavÅ™Ã­t administraci</button>
        </div>
    </div>

    <!-- Modal pro editaci -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2>Upravit dÃ­tÄ›</h2>
            <label>PIN:</label>
            <input type="text" id="modalPin" maxlength="4">
            <label>JmÃ©no:</label>
            <input type="text" id="modalName">
            <label>Text dopisu:</label>
            <textarea id="modalText"></textarea>
            <div class="modal-buttons">
                <button class="btn-large" onclick="app.saveModal()">ğŸ’¾ UloÅ¾it</button>
                <button class="btn-large" onclick="app.closeModal()">âŒ ZruÅ¡it</button>
            </div>
        </div>
    </div>

    <!-- Modal s nÃ¡povÄ›dou -->
    <div id="helpModal" class="modal">
        <div class="modal-content help-modal">
            <button class="modal-close-btn" onclick="app.closeHelp()" title="ZavÅ™Ã­t">âœ•</button>
            <h2>ğŸ“– Dokumentace MikulÃ¡Å¡skÃ© aplikace</h2>
            
            <div class="help-section">
                <h3>ğŸ¯ ZÃ¡kladnÃ­ pouÅ¾itÃ­</h3>
                <p>Aplikace slouÅ¾Ã­ k zobrazenÃ­ personalizovanÃ½ch dopisÅ¯ od MikulÃ¡Å¡e. KaÅ¾dÃ© dÃ­tÄ› mÃ¡ svÅ¯j unikÃ¡tnÃ­ PIN kÃ³d.</p>
            </div>

            <div class="help-section">
                <h3>ğŸ”¢ SpeciÃ¡lnÃ­ PIN kÃ³dy</h3>
                <ul>
                    <li><strong>9989</strong> - Vstup do administrace</li>
                    <li><strong>7897</strong> - TajnÃ½ kÃ³d pro nÃ¡hodnÃ½ motivaÄnÃ­ citÃ¡t</li>
                    <li><strong>1231</strong> - Å tÄ›stÃ­Äko s motivaÄnÃ­m citÃ¡tem</li>
                    <li><strong>4564</strong> - VtipnÃ½ reÅ¾im s nÃ¡hodnÃ½m vtipem</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ® OvlÃ¡dÃ¡nÃ­</h3>
                <ul>
                    <li><strong>Enter</strong> - PotvrzenÃ­ na obrazovkÃ¡ch s jednÃ­m tlaÄÃ­tkem</li>
                    <li><strong>MezernÃ­k</strong> - TajnÃ½ kÃ³d (PIN 7897) na PIN obrazovce</li>
                    <li><strong>KliknutÃ­ na PIN pole</strong> - TakÃ© spustÃ­ tajnÃ½ kÃ³d (7897)</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ‘¥ SprÃ¡va dÄ›tÃ­</h3>
                <ul>
                    <li>KliknutÃ­m na Å™Ã¡dek v tabulce upravÃ­te dÃ­tÄ›</li>
                    <li>Dvojklik na tlaÄÃ­tko "Smazat" potvrdÃ­ smazÃ¡nÃ­</li>
                    <li>PIN je automaticky pÅ™iÅ™azen pÅ™i pÅ™idÃ¡nÃ­ novÃ©ho dÃ­tÄ›te (1000-9999)</li>
                    <li>KliknutÃ­m na zÃ¡hlavÃ­ sloupce PIN nebo JmÃ©no Å™adÃ­te data</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ’¾ Import a Export</h3>
                <p><strong>Export:</strong> VytvoÅ™Ã­ zÃ¡lohu vÅ¡ech dat ve formÃ¡tu JSON.</p>
                <p><strong>Import:</strong> Podporuje formÃ¡ty .json a .csv</p>
                <p><strong>CSV formÃ¡t:</strong></p>
                <pre>PIN,Jmeno,Text dopisu
1234,"Petr","MilÃ½ PetÅ™e,\nbyls letos hodnÃ½!"</pre>
                <p>Pro vÃ­ceÅ™Ã¡dkovÃ½ text pouÅ¾ijte uvozovky. Excel: uloÅ¾te jako CSV UTF-8.</p>
            </div>

            <div class="help-section">
                <h3>âœ‰ï¸ FormÃ¡t dopisu</h3>
                <p>K textu dopisu se automaticky pÅ™idÃ¡vÃ¡ patiÄka:</p>
                <pre>UÅ¾ij si svou odmÄ›nu!

                                    MikulÃ¡Å¡ a spol.</pre>
            </div>

            <div class="help-section">
                <h3>ğŸª Fortune Cookie (PIN 7897)</h3>
                <p>SpeciÃ¡lnÃ­ PIN generuje nÃ¡hodnÃ© jmÃ©no a motivaÄnÃ­ citÃ¡t. DÃ­tÄ› nenÃ­ uloÅ¾eno do databÃ¡ze.</p>
            </div>

            <div class="help-section">
                <h3>ğŸ˜„ VtipnÃ½ reÅ¾im (PIN 4564)</h3>
                <p>SpeciÃ¡lnÃ­ PIN zobrazuje nÃ¡hodnÃ½ vtip. PerfektnÃ­ pro pobavenÃ­!</p>
            </div>

            <div class="help-section">
                <h3>âš™ï¸ TechnickÃ© informace</h3>
                <ul>
                    <li>Data jsou uloÅ¾ena v lokÃ¡lnÃ­m ÃºloÅ¾iÅ¡ti prohlÃ­Å¾eÄe</li>
                    <li>RozliÅ¡enÃ­: 1024Ã—1280 px (kiosek reÅ¾im)</li>
                    <li>DoporuÄenÃ½ prohlÃ­Å¾eÄ: Chrome, Edge</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
