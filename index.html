<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1024, initial-scale=1.0">
    <title>Mikul√°≈°sk√° aplikace</title>
    <link rel="icon" type="image/png" href="images/app-icon.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Overlay PINpad -->
    <div id="pinpadOverlay" style="position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0); z-index: 2000; align-items: center; justify-content: center;">
    <div style="position: absolute; left: 220px; top: 795px; background: #fff; border-radius: 16px; box-shadow: 0 4px 24px rgba(0,0,0,0.2); padding: 32px; min-width: 320px;">
            <h2 style="text-align:center; margin-bottom:16px;">Zadejte PIN</h2>
            <div id="pinpadDigits" style="display:flex; justify-content:center; gap:8px; margin-bottom:16px;"></div>
            <div style="display:grid; grid-template-columns:repeat(3,60px); gap:12px; justify-content:center;">
                <button class="pinpad-btn" data-digit="1">1</button>
                <button class="pinpad-btn" data-digit="2">2</button>
                <button class="pinpad-btn" data-digit="3">3</button>
                <button class="pinpad-btn" data-digit="4">4</button>
                <button class="pinpad-btn" data-digit="5">5</button>
                <button class="pinpad-btn" data-digit="6">6</button>
                <button class="pinpad-btn" data-digit="7">7</button>
                <button class="pinpad-btn" data-digit="8">8</button>
                <button class="pinpad-btn" data-digit="9">9</button>
                <button class="pinpad-btn" data-action="clear">C</button>
                <button class="pinpad-btn" data-digit="0">0</button>
                <button class="pinpad-btn" data-action="ok">OK</button>
            </div>
        </div>
    </div>
    <!-- √övodn√≠ obrazovka -->
    <div id="welcomeScreen" class="screen active" style="background-image: url('images/bg-welcome.png')">
        <div class="content">
            <h1>V√≠tej!</h1>
            <button onclick="app.goToPin()" class="btn-large">Zaƒç√≠t</button>
        </div>
    </div>

    <!-- PIN obrazovka -->
    <div id="pinScreen" class="screen" style="background-image: url('images/bg-pin.png')">
        <button class="secret-joke-btn" onclick="app.triggerJoke()"></button>
        <div class="content">
            <div class="pin-inputs">
                <input type="tel" maxlength="1" class="pin-digit" data-index="0" pattern="[0-9]*" inputmode="numeric" onclick="app.secretCode()">
                <input type="tel" maxlength="1" class="pin-digit" data-index="1" pattern="[0-9]*" inputmode="numeric" onclick="app.secretCode()">
                <input type="tel" maxlength="1" class="pin-digit" data-index="2" pattern="[0-9]*" inputmode="numeric" onclick="app.secretCode()">
                <input type="tel" maxlength="1" class="pin-digit" data-index="3" pattern="[0-9]*" inputmode="numeric" onclick="app.secretCode()">
            </div>
            <p class="error-message" id="pinError"></p>
        </div>
    </div>

    <!-- Kolo ≈°tƒõst√≠ -->
    <div id="wheelScreen" class="screen" style="background-image: url('images/bg-kolo.png')">
        <div class="content">
            <canvas id="wheelCanvas" width="600" height="600"></canvas>
            <div class="loading-container">
                <div class="loading-text">Hled√°m ve sv√Ωch pozn√°mk√°ch...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            <button onclick="app.spinWheel()" id="spinButton" class="btn-large" style="display: none;">Roztoƒçit</button>
        </div>
    </div>

    <!-- Dopis na pergamenu -->
    <div id="letterScreen" class="screen" style="background-image: url('images/bg-letter.png')">
        <button class="secret-regenerate-btn" onclick="app.regenerateContent()"></button>
        <div class="content">
            <div class="parchment">
                <div id="letterText" class="letter-text"></div>
            </div>
            <button id="endLetterButton" onclick="app.goToGoodbye()" class="btn-large continue">Dokonƒçit</button>
        </div>
    </div>

    <!-- Rozlouƒçen√≠ -->
    <div id="goodbyeScreen" class="screen" style="background-image: url('images/bg-goodbye.png')">
        <div class="content">
            <h1>Dƒõkujeme,<br>a tƒõ≈°√≠me se na dal≈°√≠ setk√°n√≠!</h1>
            <button onclick="app.restart()" class="btn-large">Zaƒç√≠t znovu</button>
        </div>
    </div>

    <!-- Admin panel -->
    <div id="adminScreen" class="screen admin-screen">
        <button class="help-btn" onclick="app.showHelp()" title="N√°povƒõda">?</button>
        <button class="close-admin-btn" onclick="app.closeAdmin()" title="Zav≈ô√≠t administraci">‚úï</button>
        <div class="content">
            <h1>Administrace</h1>
            <div id="dropZone" class="file-drop-zone"><p>P≈ôet√°hnƒõte sem z√°lohu (.json nebo .csv)</p><input type="file" id="dropZoneFileInput" style="display:none" accept=".json,.csv"></div>
            <button onclick="app.exportBackup()" class="btn-large continue">üíæ Z√°lohovat</button>
            <button id="resetDataBtn" class="btn-large continue btn-danger">üóëÔ∏è Zaƒç√≠t znovu</button>
            <div class="admin-tabs">
                <button class="admin-tab-btn" id="tab-names" onclick="app.switchAdminTab('names')">Jm√©na</button>
                <button class="admin-tab-btn" id="tab-jokes" onclick="app.switchAdminTab('jokes')">Vtipy</button>
                <button class="admin-tab-btn" id="tab-phrases" onclick="app.switchAdminTab('phrases')">FRAZE</button>
            </div>
            <div id="adminTabContent">
                <!-- Dynamicky generov√°no JS -->
            </div>
            <button onclick="app.closeAdmin()" class="btn-large continue">Zav≈ô√≠t administraci</button>
        </div>
    </div>

    <!-- Modal pro editaci jm√©na/vtipu/fraze -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2 id="editModalTitle">Upravit</h2>
            <label id="editModalLabel">Pozn√°mka:</label>
            <textarea id="modalEditText"></textarea>
            <div class="modal-buttons">
                <button class="btn-large continue" onclick="app.saveEditModal()">üíæ Ulo≈æit</button>
                <button class="btn-large continue" onclick="app.closeModal()">‚ùå Zru≈°it</button>
            </div>
        </div>
    </div>

    <!-- Modal pro import -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <h2 id="importModalTitle">Importovat CSV</h2>
            <input type="file" id="importFileInput" accept=".csv">
            <div class="modal-buttons">
                <button class="btn-large continue" onclick="app.importCSVModal()">üìÇ Importovat</button>
                <button class="btn-large continue" onclick="app.closeImportModal()">‚ùå Zru≈°it</button>
            </div>
            <div id="importTemplateLink"></div>
        </div>
    </div>

    <!-- Modal s n√°povƒõdou -->
    <div id="helpModal" class="modal">
        <div class="modal-content help-modal">
            <button class="modal-close-btn" onclick="app.closeHelp()" title="Zav≈ô√≠t">‚úï</button>
            <h2>üìñ Dokumentace Mikul√°≈°sk√© aplikace</h2>
            
            <div class="help-section">
                <p>Pro v√≠ce≈ô√°dkov√Ω text pou≈æijte uvozovky. Excel: ulo≈æte jako CSV UTF-8.</p>
                                    Mikul√°≈° a spol.</pre>
            </div>
                <div class="help-section">
                    <h3>üéØ Z√°kladn√≠ pou≈æit√≠</h3>
                    <p>Aplikace slou≈æ√≠ k zobrazen√≠ personalizovan√Ωch dopis≈Ø od Mikul√°≈°e. Ka≈æd√© d√≠tƒõ m√° sv≈Øj unik√°tn√≠ PIN k√≥d. K dispozici je administrace pro spr√°vu dƒõt√≠, vtip≈Ø a motivaƒçn√≠ch fr√°z√≠.</p>
                </div>

                <div class="help-section">
                    <h3>üî¢ Speci√°ln√≠ PIN k√≥dy</h3>
                    <ul>
                        <li><strong>9989</strong> - Vstup do administrace</li>
                        <li><strong>7897</strong> - Fortune cookie (n√°hodn√Ω motivaƒçn√≠ cit√°t)</li>
                        <li><strong>1231</strong> - ≈†tƒõst√≠ƒçko s motivaƒçn√≠m cit√°tem</li>
                        <li><strong>4564</strong> - Vtipn√Ω re≈æim s n√°hodn√Ωm vtipem</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üéÆ Ovl√°d√°n√≠</h3>
                    <ul>
                        <li><strong>Enter</strong> - Potvrzen√≠ na obrazovk√°ch s jedn√≠m tlaƒç√≠tkem</li>
                        <li><strong>Mezern√≠k</strong> - Tajn√Ω k√≥d (PIN 7897) na PIN obrazovce</li>
                        <li><strong>Kliknut√≠ na PIN pole</strong> - Tak√© spust√≠ tajn√Ω k√≥d (7897)</li>
                        <li><strong>Drag & Drop</strong> - P≈ôet√°hnƒõte z√°lohu (.json/.csv) na dropzonu v administraci</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üë• Administrace</h3>
                    <ul>
                        <li>Taby pro spr√°vu: Jm√©na, Vtipy, FRAZE</li>
                        <li>P≈ôid√°n√≠, √∫prava, maz√°n√≠ polo≈æek</li>
                        <li>Export/import CSV pro ka≈ædou sekci</li>
                        <li>Export z√°lohy aplikace (JSON)</li>
                        <li>Potvrzen√≠ maz√°n√≠: kliknƒõte dvakr√°t na tlaƒç√≠tko üóëÔ∏è</li>
                        <li>Reset dat: tlaƒç√≠tko vymazat data a zaƒç√≠t znovu (potvrzen√≠)</li>
                        <li>N√°povƒõda: tlaƒç√≠tko ? vpravo naho≈ôe</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üíæ Import a Export</h3>
                    <p><strong>Export jmen:</strong> CSV soubor s PIN, Jm√©no, Text dopisu.</p>
                    <p><strong>Export vtip≈Ø/fr√°z√≠:</strong> CSV soubor s pozn√°mkami.</p>
                    <p><strong>Export z√°lohy:</strong> JSON soubor s celou datab√°z√≠.</p>
                    <p><strong>Import:</strong> Podporuje form√°ty .json a .csv. P≈ôet√°hnƒõte soubor na dropzonu nebo pou≈æijte tlaƒç√≠tko Importovat.</p>
                    <p><strong>CSV form√°t:</strong></p>
                    <pre>PIN,Jmeno,Text dopisu
                    <p>Pro v√≠ce≈ô√°dkov√Ω text pou≈æijte uvozovky. Excel: ulo≈æte jako CSV UTF-8.</p>
                </div>

                <div class="help-section">
                    <h3>‚úâÔ∏è Form√°t dopisu</h3>
                    <p>K textu dopisu se automaticky p≈ôid√°v√° patiƒçka: U≈æij si svou odmƒõnu!</p>
                    
                </div>

                <div class="help-section">
                    <h3>üç™ Fortune Cookie (PIN 7897)</h3>
                    <p>Speci√°ln√≠ PIN generuje n√°hodn√© jm√©no a motivaƒçn√≠ cit√°t. D√≠tƒõ nen√≠ ulo≈æeno do datab√°ze.</p>
                </div>

                <div class="help-section">
                    <h3>üòÑ Vtipn√Ω re≈æim (PIN 4564)</h3>
                    <p>Speci√°ln√≠ PIN zobrazuje n√°hodn√Ω vtip. Perfektn√≠ pro pobaven√≠!</p>
                </div>

                <div class="help-section">
                    <h3>‚öôÔ∏è Technick√© informace</h3>
                    <ul>
                        <li>Data jsou ulo≈æena v lok√°ln√≠m √∫lo≈æi≈°ti prohl√≠≈æeƒçe</li>
                        <li>Rozli≈°en√≠: 1024√ó1280 px (kiosek re≈æim)</li>
                        <li>Doporuƒçen√Ω prohl√≠≈æeƒç: Chrome, Edge</li>
                    </ul>
                </div>
    </div>
</body>

    <script src="app.js"></script>
</html>
